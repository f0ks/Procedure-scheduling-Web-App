<div class="card">
  <div class="card-body">
    <form [formGroup]="proceduresForm" novalidate>

      <div class="form-group">

        <label>Patient</label>

        <select
          class="form-control"
          name="patient"
          formControlName="patient">
          <option *ngFor="let p of patients" [ngValue]="p">{{ p.name }}</option>
        </select>

        <!-- validation message -->
        <div
          *ngIf="proceduresForm.controls['patient'].invalid && (proceduresForm.controls['patient'].dirty ||
            proceduresForm.controls['patient'].touched)"
          class="alert alert-danger">
          <div *ngIf="proceduresForm.controls['patient'].errors.required">
            Patient is required.
          </div>
        </div>

      </div>

      <!-- ------------------------------------------------------------------------------------ -->

      <div class="form-group">

        <label>Description</label>

        <input
          type="text"
          class="form-control"
          name="description"
          formControlName="description"
        />

        <!-- validation message -->
        <div
          *ngIf="proceduresForm.controls['description'].invalid && (proceduresForm.controls['description'].dirty ||
            proceduresForm.controls['description'].touched)"
          class="alert alert-danger">
          <div *ngIf="proceduresForm.controls['description'].errors.required">
            Unit Name is required.
          </div>
        </div>

      </div>

      <!-- ------------------------------------------------------------------------------------ -->


      <div class="form-group">

        <label>Status</label>

        <select class="form-control" name="status"
                formControlName="status">
          <option *ngFor="let s of status" [ngValue]="s">{{ s }}</option>
        </select>

        <!-- validation message -->
        <div
          *ngIf="proceduresForm.controls['status'].invalid && (proceduresForm.controls['status'].dirty
            || proceduresForm.controls['status'].touched)"
          class="alert alert-danger">
          <div *ngIf="proceduresForm.controls['status'].errors.required">
            status is required.
          </div>
        </div>

      </div>

      <!-- ------------------------------------------------------------------------------------ -->


      <div class="form-group">

        <label>Planned Start time </label>

        <input
          type="date"
          class="form-control"
          name="start_time"
          formControlName="start_time"
        />

        <!-- validation message -->
        <div
          *ngIf="proceduresForm.controls['start_time'].invalid && (proceduresForm.controls['start_time'].dirty
            || proceduresForm.controls['start_time'].touched)"
          class="alert alert-danger">
          <div *ngIf="proceduresForm.controls['start_time'].errors.required">
            status is required.
          </div>
        </div>

      </div>

      <!-- ------------------------------------------------------------------------------------ -->


      <div class="form-group">

        <label>Estimated End time (optional)</label>

        <input
          type="date"
          class="form-control"
          name="end_time"
          formControlName="end_time"
        />

        <!-- validation message -->
        <div
          *ngIf="proceduresForm.controls['end_time'].invalid && (proceduresForm.controls['end_time'].dirty
            || proceduresForm.controls['end_time'].touched)"
          class="alert alert-danger">
          <div *ngIf="proceduresForm.controls['end_time'].errors.required">
            status is required.
          </div>
        </div>

      </div>

      <!-- ------------------------------------------------------------------------------------ -->


      <div class="form-group">

        <button
          (click)="addProcedure(proceduresForm.controls.patient.value,
          proceduresForm.controls.description.value,
          proceduresForm.controls.status.value,
          proceduresForm.controls.start_time.value,
          proceduresForm.controls.end_time.value)"

          [disabled]="proceduresForm.pristine || proceduresForm.invalid"
          class="btn btn-primary">Schedule a procedure
        </button>

      </div>

    </form>
  </div>
</div>
